<p>This tool alters the cumulative distribution function (CDF) of a raster image to match, as closely as possible, the CDF of a reference histogram. Histogram matching works by first calculating the histogram of the input image. This input histogram and reference histograms are each then converted into CDFs. Each grid cell value in the input image is then mapped to the corresponding value in the reference CDF that has an equivalent (or as close as possible) cumulative probability value. Histogram matching provides the most flexible means of performing image contrast adjustment.</p> <p>The reference histogram must be specified to the tool in the form of a text file (.txt), provided using the <code>histo_file</code> flag. This file must contain two columns (delimited by a tab, space, comma, colon, or semicolon) where the first column contains the x value (i.e. the values that will be assigned to the grid cells in the output image) and the second column contains the frequency or probability. Note that 1) the file must not contain a header row, 2) each x value/frequency pair must be on a separate row. It is possible to create this type of histogram using the wide range of distribution tools available in most spreadsheet programs (e.g. Excel or LibreOffice's Calc program). You must save the file as a text-only (ASCII) file.</p> <p><a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/tool_help.html#histogram_matching">histogram_matching</a> is related to the <a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/tool_help.html#histogram_matching_two_images">histogram_matching_two_images</a> tool, which can be used when a reference CDF can be derived from a reference image. <a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/tool_help.html#histogram_equalization">histogram_equalization</a> and <a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/tool_help.html#gaussian_contrast_stretch">gaussian_contrast_stretch</a> are similarly related tools frequently used for image contrast adjustment, where the reference CDFs are uniform and Gaussian (normal) respectively.</p> <p><strong>Notes:</strong> - The algorithm can introduces gaps in the histograms (steps in the CDF). This is to be expected because the histogram is being distorted. This is more prevalent for integer-level images. - Histogram matching is not appropriate for images containing categorical (class) data. - This tool is not intended for images containing RGB data. If this is the case, the colour channels should be split using the <a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/tool_help.html#split_colour_composite">split_colour_composite</a> tool.</p> <h2>See Also</h2> <p><a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/tool_help.html#histogram_matching_two_images">histogram_matching_two_images</a>, <a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/tool_help.html#histogram_equalization">histogram_equalization</a>, <a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/tool_help.html#gaussian_contrast_stretch">gaussian_contrast_stretch</a>, <a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/tool_help.html#split_colour_composite">split_colour_composite</a></p> <h2>Function Signature</h2> <p><code>def histogram_matching(self, image: Raster, histogram: List[List[float]], histo_is_cumulative: bool = False) -&gt; Raster: ... </code></p>
<h2>Project Links</h2>
<div align="left">
    <a href="https://www.whiteboxgeo.com/whitebox-workflows-for-python/">WbW Homepage</a>
    <a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/preface.html">User Manual</a>
    <a href="https://www.whiteboxgeo.com/wbw-purchase/">Support WbW</a>
</div>        
