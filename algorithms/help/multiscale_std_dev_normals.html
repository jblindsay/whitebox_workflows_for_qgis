<p>This tool can be used to map the spatial pattern of maximum spherical standard deviation (σ<sub><em>s max</em></sub>; <code>out_mag</code>), as well as the scale at which maximum spherical standard deviation occurs (<em>r<sub>max</sub></em>; <code>out_scale</code>), for each grid cell in an input DEM (<code>dem</code>). This serves as a multi-scale measure of surface roughness, or topographic complexity. The spherical standard deviation (σ<sub>s</sub>) is a measure of the angular spread among <em>n</em> unit vectors and is defined as:</p> <blockquote> <p>σ<sub>s</sub> = &radic;[-2ln(<em>R</em> / <em>N</em>)] &times; 180 / &pi;</p> </blockquote> <p>Where <em>R</em> is the resultant vector length and is derived from the sum of the <em>x</em>, <em>y</em>, and <em>z</em> components of each of the <em>n</em> normals contained within a filter kernel, which designates a tested spatial scale. Each unit vector is a 3-dimensional measure of the surface orientation and slope at each grid cell center. The maximum spherical standard deviation is:</p> <blockquote> <p>σ<sub><em>s max</em></sub>=<em>max</em>{σs(<em>r</em>):<em>r</em>=<em>r<sub>L</sub></em>...<em>r<sub>U</sub></em>},</p> </blockquote> <p>Experience with roughness scale signatures has shown that σ<sub><em>s max</em></sub> is highly variable at shorter scales and changes more gradually at broader scales. Therefore, a nonlinear scale sampling interval is used by this tool to ensure that the scale sampling density is higher for short scale ranges and coarser at longer tested scales, such that:</p> <blockquote> <p><em>r<sub>i</sub></em> = <em>r<sub>L</sub></em> + [step &times; (i - <em>r<sub>L</sub></em>)]<sup><em>p</em></sup></p> </blockquote> <p>Where <em>ri</em> is the filter radius for step <em>i</em> and <em>p</em> is the nonlinear scaling factor (<code>step_nonlinearity</code>) and a step size (<code>step</code>) of <em>step</em>.</p> <p>Use the <a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/tool_help.html#spherical_std_dev_of_normals">spherical_std_dev_of_normals</a> tool if you need to calculate σ<sub>s</sub> for a single scale.</p> <h2>Reference</h2> <p>JB Lindsay, DR Newman, and A  Francioni. 2019 Scale-Optimized Surface Roughness for Topographic Analysis. <em>Geosciences</em>, 9(322) doi: 10.3390/geosciences9070322.</p> <h2>See Also</h2> <p><a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/tool_help.html#spherical_std_dev_of_normals">spherical_std_dev_of_normals</a>, <a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/tool_help.html#multiscale_std_dev_normals_signature">multiscale_std_dev_normals_signature</a>, <a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/tool_help.html#multiscale_roughness">multiscale_roughness</a></p> <h2>Function Signature</h2> <p><code>def multiscale_std_dev_normals(self, dem: Raster, min_scale: int = 4, step_size: int = 1, num_steps: int = 10, step_nonlinearity: float = 1.0, html_signature_file: str = "") -&gt; Tuple[Raster, Raster]: ... </code></p>
<h2>Project Links</h2>
<div align="left">
    <a href="https://www.whiteboxgeo.com/whitebox-workflows-for-python/">WbW Homepage</a>
    <a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/preface.html">User Manual</a>
    <a href="https://www.whiteboxgeo.com/wbw-purchase/">Support WbW</a>
</div>        
