<blockquote> <p>Note this tool is part of a <a href="../whitebox_extensions.html">WhiteboxTools extension product</a>. Please visit <a href="https://www.whiteboxgeo.com">Whitebox Geospatial Inc.</a> for information about purchasing a license activation key (<a href="https://www.whiteboxgeo.com/extension-pricing/">https://www.whiteboxgeo.com/extension-pricing/</a>).</p> </blockquote> <p>This tool can map river centerlines, or medial-lines, from input river rasters (<code>input</code>). The input river (or water) raster is often derived from an image classification performed on multispectral satellite imagery. The river raster must be a Boolean (1 for water, 0/NoData for not-water) and can be derived either by reclassifying the classification output, or derived using a 1-class classification procedure. For example, using the <a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/tool_help.html#parallelepiped_classification">parallelepiped_classification</a> tool, it is possible to train the classifier using water training polygons, and all other land classes will simply be left unclassified. It may be necessary to perform some pre-processing on the water Boolean raster before input to the centerlines tool. For example, you may need to remove smaller water polygons associated with small lakes and ponds, and you may want to remove small islands from the remaining water features. This tool will often create a bifurcating vector path around islands within rivers, even if those islands are a single-cell in size. The <code>RemoveRasterPolygonHoles</code> tool can be used to remove islands in the water raster that are smaller than a user-specified size. The user must also specify the minimum line length (<code>min_length</code>), which determines the level of detail in the final rivers map. For example, in the first iamge below, a value of 30 grid cells was used for the <code>min_length</code> parameter, while a value of 5 was used in the second image, which possesses far more (arguably too much) detail.</p> <p><img alt="" src="./img/RiverCenterlines.png" /></p> <p><img alt="" src="./img/RiverCenterlines2.png" /></p> <p>Lastly, the user must specify the <code>radius</code> parameter value. At times, the tool will be able to connect distant water polygons that are part of the same feature and this parameter determines the size of the search radius used to identify separated line end-nodes that are candidates for connection. It is advisable that this value not be set too high, or else unexpected connections may be made between unrelated water features. However, a value of between 1 and 5 can produce satisfactory results. Experimentation may be needed to find an appropriate value for any one data set however. The image below provides an example of this characteristic of the tool, where the resulting vector stream centerline passes through disconnected raster water polygons in the underlying input image in four locations.</p> <p><img alt="" src="./img/RiverCenterlines3.png" /></p> <p><a href="https://youtu.be/JxykG8i1SlY"><strong>Here</strong></a> is a video that demonstrates how to apply this tool to map river center-lines taken from a water raster created by classifying a Sentinel-2 multi-spectral satellite imagery data set.</p> <h2>See Also</h2> <p><a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/tool_help.html#parallelepiped_classification">parallelepiped_classification</a>, <code>RemoveRasterPolygonHoles</code></p> <h2>Function Signature</h2> <p><code>def river_centerlines(self, raster: Raster, min_length: int = 3, search_radius: int = 9) -&gt; Vector: ... </code></p>
<h2>Project Links</h2>
<div align="left">
    <a href="https://www.whiteboxgeo.com/whitebox-workflows-for-python/">WbW Homepage</a>
    <a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/preface.html">User Manual</a>
    <a href="https://www.whiteboxgeo.com/wbw-purchase/">Support WbW</a>
</div>        
