<p>The <a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/tool_help.html#raster_calculator">raster_calculator</a> tool can be used to perform a complex mathematical operations on one or more input raster images on a cell-to-cell basis. The user inputs an <code>expression</code> and a list of input rasters (<code>input_rasters</code>),  specified in the same order as the rasters contained within the statement. Rasters are treated like variables (that change value with each grid cell) and are specified within the statement as arbitrarily named variables contained within either double or single quotation marks (e.g. "DEM" &gt; 500.0). The order of raster variables must match the order of rasters within the <code>input_rasters</code> list.**Note, all input rasters must share the same number of rows and columns and spatial extent. Use the <a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/tool_help.html#resample">resample</a> tool if this is not the case to convert the one raster's grid resolution to the others.</p> <h2>Example</h2> <p><code>(band3, band4) = wbe.read_rasters('band3.tif', 'band4.tif') result = wbe.raster_calculator("('nir' - 'red') / ('nir' + 'red')", [band4, band3]) wbe.write_raster(result, 'result.tif', True) </code> The mathematical expression supports all of the standard algebraic unary and binary operators (+ - * / ^ %),  as well as comparisons (&lt; &lt;= == != &gt;= &gt;) and logical operators (&amp;&amp; ||) with short-circuit support. The order of operations, from highest to lowest is as follows.</p> <p>Listed in order of precedence:</p> <table> <th><td>Order</td><td>Symbol</td><td>Description</td></th> <tr><td>(Highest Precedence)</td><td>^</td><td>Exponentiation</td></tr> <tr><td>%</td><td>Modulo</td></tr> <tr><td>/</td><td>Division</td></tr> <tr><td>*</td><td>Multiplication</td></tr> <tr><td>-</td><td>Subtraction</td></tr> <tr><td>+</td><td>Addition</td></tr> <tr><td>== != < <= >= ></td><td>Comparisons (all have equal precedence)</td></tr> <tr><td>&& and</td><td>Logical AND with short-circuit</td></tr> <tr><td>(Lowest Precedence)</td><td>&#124;&#124; or</td><td>Logical OR with short-circuit</td></tr> <tr></tr>  </table> <p>Several common mathematical functions are also available for use in the input statement. For example:</p> <p><code> * log(base=10, val) -- Logarithm with optional 'base' as first argument.  If not provided, 'base' defaults to '10'.  Example: log(100) + log(e(), 100)</p> <ul> <li>e()  -- Euler's number (2.718281828459045)</li> <li> <p>pi() -- Ï€ (3.141592653589793)</p> </li> <li> <p>int(val)</p> </li> <li>ceil(val)</li> <li>floor(val)</li> <li> <p>round(modulus=1, val) -- Round with optional 'modulus' as first argument.      Example: round(1.23456) == 1 &amp;&amp; round(0.001, 1.23456) == 1.235</p> </li> <li> <p>abs(val)</p> </li> <li> <p>sign(val)</p> </li> <li> <p>min(val, ...) -- Example: min(1, -2, 3, -4) == -4</p> </li> <li> <p>max(val, ...) -- Example: max(1, -2, 3, -4) == 3</p> </li> <li> <p>sin(radians)    * asin(val)</p> </li> <li>cos(radians)    * acos(val)</li> <li>tan(radians)    * atan(val)</li> <li>sinh(val)       * asinh(val)</li> <li>cosh(val)       * acosh(val)</li> <li>tanh(val)       * atanh(val) </code> Notice that the constants pi and e must be specified as functions, <code>pi()</code> and <code>e()</code>. A number of global variables  are also available to build conditional statements. These include the following:</li> </ul> <p><strong>Special Variable Names For Use In Conditional Statements:</strong></p> <table> <th><td>Name</td><td>Description</td></th> <tr><td>`nodata`</td><td>An input raster's NoData value.</td></tr> <tr><td>`null`</td><td>Same as `nodata`.</td></tr> <tr><td>`minvalue`</td><td>An input raster's minimum value.</td></tr> <tr><td>`maxvalue`</td><td>An input raster's maximum value.</td></tr> <tr><td>`rows`</td><td>The input raster's number of rows.</td></tr> <tr><td>`columns`</td><td>The input raster's number of columns.</td></tr> <tr><td>`row`</td><td>The grid cell's row number.</td></tr> <tr><td>`column`</td><td>The grid cell's column number.</td></tr> <tr><td>`rowy`</td><td>The row's y-coordinate.</td></tr> <tr><td>`columnx`</td><td>The column's x-coordinate.</td></tr> <tr><td>`north`</td><td>The input raster's northern coordinate.</td></tr> <tr><td>`south`</td><td>The input raster's southern coordinate.</td></tr> <tr><td>`east`</td><td>The input raster's eastern coordinate.</td></tr> <tr><td>`west`</td><td>The input raster's western coordinate.</td></tr> <tr><td>`cellsizex`</td><td>The input raster's grid resolution in the x-direction.</td></tr> <tr><td>`cellsizey`</td><td>The input raster's grid resolution in the y-direction.</td></tr> <tr><td>`cellsize`</td><td>The input raster's average grid resolution.</td></tr>  </table> <p>The special variable names are case-sensitive. If there are more than one raster inputs used in the statement, the functional forms of the <code>nodata</code>, <code>null</code>, <code>minvalue</code>, and <code>maxvalue</code> variables should be used, e.g.  <code>nodata("InputRaster")</code>, otherwise the value is assumed to specify the attribute of the first raster in the  statement. The following are examples of valid statements:</p> <p><code> "raster" != 300.0</p> <p>"raster" &gt;= (minvalue + 35.0)</p> <p>("raster1" &gt;= 25.0) &amp;&amp; ("raster2" &lt;= 75.0) -- Evaluates to 1 where both conditions are true.</p> <p>tan("raster" * pi() / 180.0) &gt; 1.0</p> <p>"raster" == nodata </code> Any grid cell in the input rasters containing the NoData value will be assigned NoData in the output raster,  unless a NoData grid cell value allows the statement to evaluate to True (i.e. the mathematical expression  includes the <code>nodata</code> value).</p> <h2>See Also</h2> <p><code>ConditionalEvaluation</code></p> <h2>Function Signature</h2> <p><code>def raster_calculator(self, expression: str, input_rasters: List[Raster]) -&gt; Raster: ... </code></p>
<h2>Project Links</h2>
<div align="left">
    <a href="https://www.whiteboxgeo.com/whitebox-workflows-for-python/">WbW Homepage</a>
    <a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/preface.html">User Manual</a>
    <a href="https://www.whiteboxgeo.com/wbw-purchase/">Support WbW</a>
</div>        
