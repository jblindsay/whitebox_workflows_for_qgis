<p>This tool creates a digital surface model (DSM) from a LiDAR point cloud. A DSM reflects the elevation of the tops of all off-terrain objects (i.e. non-ground features) contained within the data set. For example, a DSM will model the canopy top as well as building roofs. This is in stark contrast to a bare-earth digital elevation model (DEM), which models the ground surface without off-terrain objects present. Bare-earth DEMs can be derived from LiDAR data by interpolating last-return points using one of the other LiDAR interpolators (e.g. <a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/tool_help.html#lidar_tin_gridding">lidar_tin_gridding</a>). The algorithm used for interpolation in this tool is based on gridding a triangulation (TIN) fit to top-level points in the input LiDAR point cloud. All points in the input LiDAR data set that are below other neighbouring points, within a specified search radius (<code>radius</code>), and that have a large inter-point slope, are filtered out. Thus, this tool will remove the ground surface beneath as well as any intermediate points within a forest canopy, leaving only the canopy top surface to be interpolated. Similarly, building wall points and any ground points beneath roof overhangs will also be remove prior to interpolation. Note that because the ground points beneath overhead wires and utility lines are filtered out by this operation, these features tend to be appear as 'walls' in the output DSM. If these points are classified in the input LiDAR file, you may wish to filter them out before using this tool (<a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/tool_help.html#filter_lidar_classes">filter_lidar_classes</a>).</p> <p>The following images show the differences between creating a DSM using the <a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/tool_help.html#lidar_digital_surface_model">lidar_digital_surface_model</a> and by interpolating first-return points only using the <a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/tool_help.html#lidar_tin_gridding">lidar_tin_gridding</a> tool respectively. Note, the images show <a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/tool_help.html#time_in_daylight">time_in_daylight</a>, which is a more effective way of hillshading DSMs than the traditional <a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/tool_help.html#hillshade">hillshade</a> method. Compare how the DSM created <a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/tool_help.html#lidar_digital_surface_model">lidar_digital_surface_model</a> tool (above) has far less variability in areas of tree-cover, more effectively capturing the canopy top. As well, notice how building rooftops are more extensive and straighter in the <a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/tool_help.html#lidar_digital_surface_model">lidar_digital_surface_model</a> DSM image. This is because this method eliminates ground returns beneath roof overhangs before the triangulation operation.</p> <p><img alt="" src="./img/DSM.png" /></p> <p><img alt="" src="./img/FirstReturnTIN.png" /></p> <p>The user must specify the grid resolution of the output raster (<code>resolution</code>), and optionally, the name of the input LiDAR file (<code>input</code>) and output raster (<code>output</code>). Note that if an input LiDAR file (<code>input</code>) is not specified by the user, the tool will search for all valid LiDAR (<em>.las, </em>.laz, *.zlidar) files contained within the current working directory. This feature can be very useful when you need to interpolate a DSM for a large number of LiDAR files. Not only does this batch processing mode enable the tool to run in a more optimized parallel manner, but it will also allow the tool to include a small buffer of points extending into adjacent tiles when interpolating an individual file. This can significantly reduce edge-effects when the output tiles are later mosaicked together. When run in this batch mode, the output file (<code>output</code>) also need not be specified; the tool will instead create an output file with the same name as each input LiDAR file, but with the .tif extension. This can provide a very efficient means for processing extremely large LiDAR data sets.</p> <p>Users may also exclude points from the interpolation if they fall below or above the minimum (<code>minz</code>) or maximum (<code>maxz</code>) thresholds respectively. This can be a useful means of excluding anomalously high or low points. Note that points that are classified as low points (LAS class 7) or high noise (LAS class 18) are automatically excluded from the interpolation operation.</p> <p>Triangulation will generally completely fill the convex hull containing the input point data. This can sometimes result in very long and narrow triangles at the edges of the data or connecting vertices on either side of void areas. In LiDAR data, these void areas are often associated with larger waterbodies, and triangulation can result in very unnatural interpolated patterns within these areas. To avoid this problem, the user may specify a the maximum allowable triangle edge length (<code>max_triangle_edge_length</code>) and all grid cells within triangular facets with edges larger than this threshold are simply assigned the NoData values in the output DSM. These NoData areas can later be better dealt with using the <a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/tool_help.html#fill_missing_data">fill_missing_data</a> tool after interpolation.</p> <h2>See Also</h2> <p><a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/tool_help.html#lidar_tin_gridding">lidar_tin_gridding</a>, <a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/tool_help.html#filter_lidar_classes">filter_lidar_classes</a>, <a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/tool_help.html#fill_missing_data">fill_missing_data</a>, <a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/tool_help.html#time_in_daylight">time_in_daylight</a></p> <h2>Function Signature</h2> <p><code>def lidar_digital_surface_model(self, input_lidar: Optional[Lidar], cell_size: float = 1.0, search_radius: float = 0.5, min_elev: float = float('-inf'), max_elev: float = float('inf'), max_triangle_edge_length: float = float('inf')) -&gt; Raster: ... </code></p>
<h2>Project Links</h2>
<div align="left">
    <a href="https://www.whiteboxgeo.com/whitebox-workflows-for-python/">WbW Homepage</a>
    <a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/preface.html">User Manual</a>
    <a href="https://www.whiteboxgeo.com/wbw-purchase/">Support WbW</a>
</div>        
