<h2>License Information</h2> <p>Use of this function requires a license for Whitebox Workflows for Python Professional (WbW-Pro). Please visit <a href="https://www.whiteboxgeo.com/">www.whiteboxgeo.com</a> to purchase a license.</p> <p>This tool calculates horizon area, i.e., the area of the horizon polygon centered on each point in an input digital elevation model (DEM). Horizon area is therefore conceptually related to the<br /> <a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/tool_help.html#viewshed">viewhed</a> and <a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/tool_help.html#visibility_index">visibility_index</a> functions. Horizon area can be thought of as an approximation of the viewshed area and is therefore faster to calculate a spatial distribution of compared with the visibility index. Horizon area is measured in hectares.</p> <p>The user must specify an input DEM (<code>dem</code>), the azimuth fraction (<code>az_fraction</code>), the maximum search distance (<code>max_dist</code>), and the height offset of the observer (<code>observer_hgt_offset</code>). The input DEM  should usually be a digital surface model (DSM) that contains significant off-terrain objects. Such a  model, for example, could be created using the first-return points of a LiDAR data set, or using the  <a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/tool_help.html#lidar_digital_surface_model">lidar_digital_surface_model</a> tool. The azimuth  fraction should be an even divisor of 360-degrees and must be between 1-45 degrees. </p> <p>The tool operates by calculating horizon angle (see <a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/tool_help.html#horizon_angle">horizon_angle</a>)  rasters from the DSM based on the user-specified azimuth fraction (<code>az_fraction</code>). For example, if an azimuth  fraction of 15-degrees is specified, horizon angle rasters would be calculated for the solar azimuths 0,  15, 30, 45... A horizon angle raster evaluates the vertical angle between each grid cell in a DSM and a  distant obstacle (e.g. a mountain ridge, building, tree, etc.) that obscures the view in a specified  direction. In calculating horizon angle, the user must specify the maximum search distance (<code>max_dist</code>),  in map units, beyond which the query for higher, more distant objects will cease. This parameter strongly impacts the performance of the function, with larger values resulting in significantly longer processing-times. </p> <p>With each evaluated direction, the coordinates of the horizon point is determined, using the azimuth and  the distance to horizon, with each point then serving as a vertex in a horizon polygon. The <a href="https://en.wikipedia.org/wiki/Shoelace_formula">shoelace algorithm</a> is used to measure the area of each horizon polgon for the set of grid cells, which is then reported in the output raster.</p> <p><img alt="" src="./img/horizon_area.png" /></p> <p>The <code>observer_hgt_offset</code> parameter can be used to add an increment to the source cell's elevation. For example, the following image shows the spatial pattern derived from a LiDAR DSM using <code>observer_hgt_offset = 0.0</code>:</p> <p><img alt="" src="./img/horizon_area_grd_level.png" /></p> <p>Notice that there are several places, plarticularly on the flatter rooftops, where the local noise in the LiDAR DEM, associated with the individual scan lines, has resulted in a noisy pattern in the output. By adding a small height offset of the scale of this noise variation (0.15 m), we see that most of this noisy pattern is removed in the output below:</p> <p><img alt="" src="./img/horizon_area_15cm.png" /></p> <p>As another example, in the image below, the <code>observer_hgt_offset</code> parameter has been used to measure the pattern of the index at a typical human height (1.7 m):</p> <p><img alt="" src="./img/horizon_area_170cm.png" /></p> <p>Notice how at this height a much larger area becomes visible on some of the flat rooftops where a guard wall prevents further viewing areas at shorter observer heights.</p> <h2>See Also</h2> <p><a href="tool_help_wbwpro.md#sky_view_factor">sky_view_factor</a>, <a href="tool_help_wbwpro.md#average_horizon_distance">average_horizon_distance</a>, <a href="tool_help_wbwpro.md#openness">openness</a>, <a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/tool_help.html#lidar_digital_surface_model">lidar_digital_surface_model</a>, <a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/tool_help.html#horizon_angle">horizon_angle</a></p> <h2>Function Signature</h2> <p><code>def horizon_area(self, dem: Raster, az_fraction: float = 5.0, max_dist: float = float('inf'), observer_hgt_offset: float = 0.0) -&gt; Raster: ... </code></p>
<h2>Project Links</h2>
<div align="left">
    <a href="https://www.whiteboxgeo.com/whitebox-workflows-for-python/">WbW Homepage</a>
    <a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/preface.html">User Manual</a>
    <a href="https://www.whiteboxgeo.com/wbw-purchase/">Support WbW</a>
</div>        
