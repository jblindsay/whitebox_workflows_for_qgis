<h2>License Information</h2> <p>Use of this function requires a license for Whitebox Workflows for Python Professional (WbW-Pro). Please visit <a href="https://www.whiteboxgeo.com/">www.whiteboxgeo.com</a> to purchase a license.</p> <p>This tool calculates the sky-view factor (SVF) from an input digital elevation model (DEM), or digital surface model (DSM). The SVF is the proportion of the celestial hemisphere above a point on the earth's surface that is not obstructed by the surrounding land surface. It is often used to model the diffuse light that is received at the surface and has also been applied as a relief-shading technique  (Böhner et al., 2009; Zakšek et al., 2011).</p> <p><img alt="" src="./img/sky_view_factor.png" /></p> <p>The user must specify an input DEM (<code>dem</code>), the azimuth fraction (<code>az_fraction</code>), the maximum search distance (<code>max_dist</code>), and the height offset of the observer (<code>observer_hgt_offset</code>). The input DEM  should usually be a digital surface model (DSM) that contains significant off-terrain objects. Such a  model, for example, could be created using the first-return points of a LiDAR data set, or using the  <a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/tool_help.html#lidar_digital_surface_model">lidar_digital_surface_model</a> tool. The azimuth  fraction should be an even divisor of 360-degrees and must be between 1-45 degrees. </p> <p>The tool operates by calculating horizon angle (see <a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/tool_help.html#horizon_angle">horizon_angle</a>)  rasters from the DSM based on the user-specified azimuth fraction (<code>az_fraction</code>). For example, if an azimuth  fraction of 15-degrees is specified, horizon angle rasters would be calculated for the solar azimuths 0,  15, 30, 45... A horizon angle raster evaluates the vertical angle between each grid cell in a DSM and a  distant obstacle (e.g. a mountain ridge, building, tree, etc.) that obscures the view in a specified  direction. In calculating horizon angle, the user must specify the maximum search distance (<code>max_dist</code>),  in map units, beyond which the query for higher, more distant objects will cease. This parameter strongly impacts the performance of the function, with larger values resulting in significantly longer processing-times. </p> <blockquote> <p>This tool uses the method described by Zakšek et al. (2011) to calculate SVF, which differs slightly from the method described by Böhner et al. (2009), as implemented in the Saga software. Most notably the Whitebox implementation does not involve local surface slope gradient and is closer in definition to the Saga 'Visible Sky' index.</p> </blockquote> <p>There are other significant differences between the Whitebox and Saga implementations of SVF. For a given maximum search distance, the Whitebox SVF will be substantially faster to calculate. Furthermore, the  Whitebox implementation has the ability to specify a height offset of the observer from the ground surface, using the <code>observer_hgt_offset</code> parameter. For example, the following image shows the spatial  pattern derived from a LiDAR DSM using <code>observer_hgt_offset = 0.0</code>:</p> <p><img alt="" src="./img/sky_view_factor_grd_level.png" /></p> <p>Notice that there are several places, plarticularly on the flatter rooftops, where the local noise in the LiDAR DEM, associated with the individual scan lines, has resulted in a somewhat noisy pattern  in the output. By adding a small height offset of the scale of this noise variation (0.15 m), we see  that most of this noisy pattern is removed in the output below:</p> <p><img alt="" src="./img/sky_view_factor_10cm.png" /></p> <p>This feature makes the function more robust against DEM noise. As another example of the usefulness of this additional parameter, in the image below, the <code>observer_hgt_offset</code> parameter has been used to  measure the pattern of the index at a typical human height (1.7 m):</p> <p><img alt="" src="./img/sky_view_factor_170cm.png" /></p> <p>Notice how overall visiblility increases at this height.</p> <h2>References</h2> <p>Böhner, J. and Antonić, O., 2009. Land-surface parameters specific to topo-climatology. Developments in soil science, 33, pp.195-226.</p> <p>Zakšek, K., Oštir, K. and Kokalj, Ž., 2011. Sky-view factor as a relief visualization technique. Remote sensing, 3(2), pp.398-415.</p> <h2>See Also</h2> <p><a href="tool_help_wbwpro.md#sky_view_factor">average_horizon_distance</a>, <a href="tool_help_wbwpro.md#average_horizon_distance">horizon_area</a>, <a href="tool_help_wbwpro.md#openness">openness</a>, <a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/tool_help.html#lidar_digital_surface_model">lidar_digital_surface_model</a>, <a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/tool_help.html#horizon_angle">horizon_angle</a></p> <h2>Function Signature</h2> <p><code>def sky_view_factor(self, dem: Raster, az_fraction: float = 5.0, max_dist: float = float('inf'), observer_hgt_offset: float = 0.0) -&gt; Raster: ... </code></p>
<h2>Project Links</h2>
<div align="left">
    <a href="https://www.whiteboxgeo.com/whitebox-workflows-for-python/">WbW Homepage</a>
    <a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/preface.html">User Manual</a>
    <a href="https://www.whiteboxgeo.com/wbw-purchase/">Support WbW</a>
</div>        
