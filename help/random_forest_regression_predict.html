<blockquote> <p>Note this tool is part of a <a href="../whitebox_extensions.html">WhiteboxTools extension product</a>. Please visit  <a href="https://www.whiteboxgeo.com">Whitebox Geospatial Inc.</a> for information about purchasing a license  activation key (<a href="https://www.whiteboxgeo.com/extension-pricing/">https://www.whiteboxgeo.com/extension-pricing/</a>).</p> </blockquote> <p>This tool applies a pre-built <a href="https://en.wikipedia.org/wiki/Random_forest">random forest (RF) regression</a>  model trained using multiple predictor rasters, or features (<code>input_rasters</code>), and training data to predict a spatial distribution. This function is part of a set of two tools, including  <a href="tool_help_wbpro.md#random_forest_regression_fit">random_forest_regression_fit</a> and <a href="tool_help_wbpro.md#random_forest_regression_predict">random_forest_regression_prdict</a>. The  <strong>random_forest_regression_fit</strong> function should be used first to create the RF model and the <strong>random_forest_regression_predict</strong> can then be used to apply that model for prediction. The output of the <em>fit</em> tool is a byte array that is a  binary representation of the RF model. This model can then be used as the input to the <em>predict</em> tool, along with a list of input raster predictors, which must be in the same order as those used in the <em>fit</em> tool (see below). The output of the <em>predict</em> tool is a raster. The reason that the RF workflow is split in this way is that often it is the case that you need to experiment with various input predictor sets and parameter values to create an adequate model. There is no need to generate an output classified raster during this experimentation stage, and because prediction can often be the slowest part of the RF modelling process, it is generally only performed after the final model has been identified. The binary representation of the RF-based model can be serialized (i.e., saved to a file) and then later read back into memory to serve as the input for the prediction  step of the workflow (see code example below).</p> <blockquote> <p><strong>Note</strong>: it is very important that the order of feature rasters is the same for both fitting the model and using the model for prediction. It is possible to use a model fitted to one data set to  make preditions for another data set, however, the set of feature reasters specified to the prediction tool must be input in the same sequence used for building the model. For example, one may  train a RF classifer on one set of multi-spectral satellite imagery and then apply that model to classify  a different imagery scene, but the image band sequence must be the same for the Fit/Predict tools otherwise inaccurate predictions will result.</p> </blockquote> <h2>Code Example</h2> <p><code>import os from whitebox_workflows import WbEnvironment</p> <p>license_id = 'floating-license-id' wbe = WbEnvironment(license_id)</p> <p>try:     wbe.verbose = True     wbe.working_directory = "/path/to/data"</p> <pre><code># Read the input raster files into memory images = wbe.read_rasters(     'DEV.tif',     'profile_curv.tif',     'tan_curv.tif',     'slope.tif' )  # Read the input training polygons into memory training_data = wbe.read_vector('Ottawa_soils_data.shp')  # Train the model model = wbe.random_forest_regression_fit(     images,      training_data,      field_name = 'Sand',     n_trees = 50,       min_samples_leaf = 1,      min_samples_split = 2,      test_proportion = 0.2 )  # Example of how to serialize the model, i.e., save the model, which is just binary data print('Saving the model to file...') file_path = os.path.join(wbe.working_directory, "rf_model.bin") with open(file_path, "wb") as file:     file.write(bytearray(model))  # # Example of how to deserialize the model, i.e. read the model # model = [] # with open(file_path, mode='rb') as file: #     model = list(file.read())  # # Use the model to predict # rf_image = wbe.random_forest_regression_predict(images, model)  # wbe.write_raster(rf_image, 'rf_regression.tif', compress=True)  print('All done!') </code></pre> <p>except Exception as e:     print("The error raised is: ", e) finally:     wbe.check_in_license(license_id)</p> <p></code></p> <h2>See Also</h2> <p><a href="tool_help_wbwpro.md#random_forest_regression_fit">random_forest_regression_fit</a>, <a href="tool_help_wbwpro.md#random_forest_classification_fit">random_forest_classification_fit</a>, <a href="tool_help_wbwpro.md#random_forest_classification_predict">random_forest_classification_predict</a>, <a href="tool_help_wbwpro.md#knn_classification">knn_classification</a>, <a href="tool_help_wbwpro.md#svm_classification">svm_classification</a>, <a href="tool_help_wbwpro.md#parallelepiped_classification">parallelepiped_classification</a>, <a href="tool_help_wbwpro.md#evaluate_training_sites">evaluate_training_sites</a></p> <h2>Function Signature</h2> <p><code>def random_forest_regression_predict(self, input_rasters: List[Raster], model_bytes: List[int]) -&gt; Raster: ... </code></p>
<h2>Project Links</h2>
<div align="left">
    <a href="https://www.whiteboxgeo.com/whitebox-workflows-for-python/">WbW Homepage</a>
    <a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/preface.html">User Manual</a>
    <a href="https://www.whiteboxgeo.com/wbw-purchase/">Support WbW</a>
</div>        
