<p>Use of this function requires a license for Whitebox Workflows for Python Professional (WbW-Pro). Please visit <a href="https://www.whiteboxgeo.com/">www.whiteboxgeo.com</a> to purchase a license.</p> <p>This function can be used to extract ridge and channel vectors from an input digital elevation model (DEM). The function works by first calculating elevation percentile (EP) from an input DEM using a neighbourhood size set by the user-specified filter_size parameter. Increasing the value of filter_size can result in more continuous mapped ridge and valley bottom networks. A thresholding operation is then applied to identify cells that have an EP less than the  user-specified ep_threshold (valley bottom regions) and a second thresholding operation maps regions where EP is  greater than 100 - ep_threshold (ridges). Each of these ridge and valley region maps are also multiplied by a slope  mask created by identify all cells with a slope greater than the user-specified slope_threshold value, which is set  to zero by default. This second thresholding can be helpful if the input DEM contains extensive flat areas, which  can be confused for valleys otherwise. The filter_size and ep_threshold parameters are somewhat dependent on one  another. Increasing the filter_size parameter generally requires also increasing the value of the ep_threshold. The  ep_threshold can take values between 5.0 and 50.0, where larger values will generally result in more extensive and  continuous mapped ridge and valley bottom networks. For many DEMs, a value on the higher end of the scale tends to  work best.</p> <p>After applying the thresholding operations, the function then applies specialized shape generalization, line thinning,  and vectorization alorithms to produce the final ridge and valley vectors. The user must also specify the value of the min_length parameter, which determines the minimum size, in grid cells, of a mapped line feature. The function outputs a tuple of two vector, the first being the ridge network and the second vector being the valley-bottom network.</p> <p><img alt="" src="./img/ridge_and_valley_vectors.jpeg" /></p> <h2>Code Example</h2> <p><code>from whitebox_workflows import WbEnvironment</p> <h2>Set up the WbW environment</h2> <p>license_id = 'my-license-id' # Note, this tool requires a license for WbW-Pro wbe = WbEnvironment(license_id) try:     wbe.verbose = True     wbe.working_directory = '/path/to/data'</p> <pre><code># Read the input DEM dem = wbe.read_raster('DEM.tif')  # Run the operation ridges, valleys = wbe.ridge_and_valley_vectors(dem, filter_size=21, ep_threshold=45.0, slope_threshold=1.0, min_length=25) wbe.write_vector(ridges, 'ridges_lines.shp') wbe.write_vector(valley, 'valley_lines.shp')  print('Done!') </code></pre> <p>except Exception as e:   print("Error: ", e) finally:     wbe.check_in_license(license_id) </code></p> <h2>See Also:</h2> <p><a href='https://www.whiteboxgeo.com/manual/wbw-user-manual/book/tool_help.html#extract_valleys'>extract_valleys</a></p> <h2>Function Signature</h2> <p><code>def ridge_and_valley_vectors(self, dem: Raster, filter_size: int = 11, ep_threshold: float = 30.0, slope_threshold: float = 0.0, min_length: int = 20) -&gt; Tuple[Raster, Raster]: </code></p>
<h2>Project Links</h2>
<div align="left">
    <a href="https://www.whiteboxgeo.com/whitebox-workflows-for-python/">WbW Homepage</a>
    <a href="https://www.whiteboxgeo.com/manual/wbw-user-manual/book/preface.html">User Manual</a>
    <a href="https://www.whiteboxgeo.com/wbw-purchase/">Support WbW</a>
</div>        
